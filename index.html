<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bandi - Advanced Accident Detection System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Navigation */
        .nav-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            padding: 10px 0;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }

        .logo {
            font-size: 1.8em;
            font-weight: bold;
            color: #667eea;
        }

        .nav-links {
            display: flex;
            gap: 20px;
        }

        .nav-link {
            padding: 10px 15px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1em;
            color: #333;
            border-radius: 20px;
            transition: all 0.3s ease;
        }

        .nav-link:hover, .nav-link.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        /* Main Container */
        .container {
            max-width: 1200px;
            margin: 80px auto 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        /* Page sections */
        .page {
            display: none;
            min-height: 600px;
        }

        .page.active {
            display: block;
        }

        .header {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 20px 20px;
            animation: float 20s infinite linear;
        }

        @keyframes float {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }

        .header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            position: relative;
            z-index: 2;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
            position: relative;
            z-index: 2;
        }

        /* Main Dashboard */
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0;
            min-height: 600px;
        }

        .detection-panel {
            padding: 40px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-right: 1px solid #dee2e6;
        }

        .chat-panel {
            padding: 40px;
            background: linear-gradient(135deg, #ffffff, #f8f9fa);
            display: flex;
            flex-direction: column;
        }

        .section-title {
            font-size: 1.8em;
            margin-bottom: 30px;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .detection-methods {
            display: grid;
            gap: 20px;
            margin-bottom: 30px;
        }

        .method-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .method-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
            border-color: #667eea;
        }

        .method-card.active {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
            border-color: #ff6b6b;
            background: linear-gradient(135deg, #fff5f5, #white);
        }

        .method-title {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .method-desc {
            color: #6c757d;
            font-size: 0.9em;
            line-height: 1.5;
        }

        .sensor-data {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }

        .sensor-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .sensor-item {
            text-align: center;
            padding: 15px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .sensor-item:hover {
            transform: scale(1.05);
        }

        .sensor-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .sensor-label {
            font-size: 0.9em;
            color: #6c757d;
        }

        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
            animation: pulse 2s infinite;
        }

        .status-safe {
            background: #2ecc71;
        }

        .status-warning {
            background: #f39c12;
        }

        .status-danger {
            background: #e74c3c;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Chat System */
        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .chat-messages {
            flex: 1;
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #dee2e6;
            border-radius: 15px;
            padding: 20px;
            background: white;
            margin-bottom: 20px;
        }

        .message {
            margin-bottom: 15px;
            padding: 12px 16px;
            border-radius: 18px;
            max-width: 80%;
            word-wrap: break-word;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .user-message {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            margin-left: auto;
        }

        .bot-message {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            color: #2c3e50;
            border: 1px solid #dee2e6;
        }

        .bot-name {
            font-weight: bold;
            color: #ff6b6b;
            margin-bottom: 5px;
        }

        .chat-input-container {
            display: flex;
            gap: 10px;
        }

        .chat-input {
            flex: 1;
            padding: 15px;
            border: 2px solid #dee2e6;
            border-radius: 25px;
            font-size: 1em;
            outline: none;
            transition: all 0.3s ease;
        }

        .chat-input:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .send-btn {
            padding: 15px 25px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .send-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        /* Settings Page */
        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            padding: 40px;
        }

        .settings-card {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }

        .settings-card h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.4em;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 500;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .btn-success {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
        }

        /* Maps Page */
        .map-container {
            padding: 20px;
        }

        .map-placeholder {
            width: 100%;
            height: 400px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2em;
            color: #6c757d;
            margin-bottom: 20px;
        }

        .location-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .location-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }

        /* Analytics Page */
        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            padding: 20px;
        }

        .analytics-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }

        .chart-placeholder {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6c757d;
            margin-top: 15px;
        }

        /* Alerts */
        .alert {
            position: fixed;
            top: 100px;
            right: 20px;
            padding: 20px;
            border-radius: 15px;
            color: white;
            font-weight: bold;
            z-index: 1000;
            animation: slideInRight 0.3s ease;
            min-width: 300px;
            max-width: 400px;
        }

        .alert-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .alert-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }

        .alert-success {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
        }

        .alert-info {
            background: linear-gradient(135deg, #3498db, #2980b9);
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }

        /* Emergency Button */
        .emergency-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 2em;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(231, 76, 60, 0.3);
            transition: all 0.3s ease;
            z-index: 999;
            animation: emergencyPulse 2s infinite;
        }

        .emergency-btn:hover {
            transform: scale(1.1);
        }

        @keyframes emergencyPulse {
            0%, 100% { box-shadow: 0 10px 30px rgba(231, 76, 60, 0.3); }
            50% { box-shadow: 0 10px 30px rgba(231, 76, 60, 0.6), 0 0 0 20px rgba(231, 76, 60, 0.1); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .nav-links {
                flex-wrap: wrap;
                gap: 10px;
            }
            
            .nav-link {
                font-size: 0.9em;
                padding: 8px 12px;
            }
            
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .detection-panel {
                border-right: none;
                border-bottom: 1px solid #dee2e6;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .container {
                margin: 80px 10px 20px;
            }
            
            .emergency-btn {
                width: 60px;
                height: 60px;
                font-size: 1.5em;
                bottom: 20px;
                right: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="nav-bar">
        <div class="nav-container">
            <div class="logo">ü§ñ BANDI</div>
            <div class="nav-links">
                <button class="nav-link active" onclick="showPage('dashboard')">Dashboard</button>
                <button class="nav-link" onclick="showPage('maps')">Location</button>
                <button class="nav-link" onclick="showPage('analytics')">Analytics</button>
                <button class="nav-link" onclick="showPage('settings')">Settings</button>
                <button class="nav-link" onclick="showPage('contacts')">Contacts</button>
            </div>
        </div>
    </nav>

    <!-- Emergency Button -->
    <button class="emergency-btn" onclick="triggerManualEmergency()" title="Emergency Alert">üö®</button>

    <div class="container">
        <!-- Dashboard Page -->
        <div id="dashboard" class="page active">
            <div class="header">
                <h1>ü§ñ BANDI</h1>
                <p>Advanced Intelligent Accident Detection & Emergency Response System</p>
            </div>
            
            <div class="main-content">
                <div class="detection-panel">
                    <h2 class="section-title">üîç Detection Methods</h2>
                    
                    <div class="detection-methods">
                        <div class="method-card" data-method="accelerometer">
                            <div class="method-title">üì± Accelerometer Detection</div>
                            <div class="method-desc">Real-time impact detection using advanced motion sensors and AI algorithms</div>
                        </div>
                        
                        <div class="method-card" data-method="gps">
                            <div class="method-title">üõ∞Ô∏è GPS Monitoring</div>
                            <div class="method-desc">Location tracking with geofencing and accident-prone area detection</div>
                        </div>
                        
                        <div class="method-card" data-method="audio">
                            <div class="method-title">üé§ Audio Analysis</div>
                            <div class="method-desc">AI-powered sound analysis for crash detection and voice commands</div>
                        </div>
                        
                        <div class="method-card" data-method="camera">
                            <div class="method-title">üì∑ Computer Vision</div>
                            <div class="method-desc">Visual accident detection using machine learning and image processing</div>
                        </div>
                        
                        <div class="method-card" data-method="biometric">
                            <div class="method-title">‚ù§Ô∏è Biometric Monitoring</div>
                            <div class="method-desc">Heart rate and stress level monitoring for health emergencies</div>
                        </div>
                        
                        <div class="method-card" data-method="manual">
                            <div class="method-title">üÜò Manual Alert</div>
                            <div class="method-desc">Instant emergency alert with voice activation and panic button</div>
                        </div>
                    </div>
                    
                    <div class="sensor-data">
                        <h3 style="margin-bottom: 15px; color: #2c3e50;">üìä Real-Time Sensor Data</h3>
                        <div class="sensor-grid">
                            <div class="sensor-item">
                                <div class="sensor-value" id="accelerometer-x">0.0</div>
                                <div class="sensor-label">Accel X (m/s¬≤)</div>
                            </div>
                            <div class="sensor-item">
                                <div class="sensor-value" id="accelerometer-y">0.0</div>
                                <div class="sensor-label">Accel Y (m/s¬≤)</div>
                            </div>
                            <div class="sensor-item">
                                <div class="sensor-value" id="accelerometer-z">9.8</div>
                                <div class="sensor-label">Accel Z (m/s¬≤)</div>
                            </div>
                            <div class="sensor-item">
                                <div class="sensor-value" id="speed">0</div>
                                <div class="sensor-label">Speed (km/h)</div>
                            </div>
                            <div class="sensor-item">
                                <div class="sensor-value" id="audio-level">45</div>
                                <div class="sensor-label">Audio (dB)</div>
                            </div>
                            <div class="sensor-item">
                                <div class="sensor-value" id="heart-rate">72</div>
                                <div class="sensor-label">Heart Rate (BPM)</div>
                            </div>
                            <div class="sensor-item">
                                <div class="sensor-value" id="temperature">36.5</div>
                                <div class="sensor-label">Body Temp (¬∞C)</div>
                            </div>
                            <div class="sensor-item">
                                <div class="sensor-value">
                                    <span class="status-indicator status-safe"></span>
                                    <span id="system-status">SAFE</span>
                                </div>
                                <div class="sensor-label">System Status</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="chat-panel">
                    <h2 class="section-title">ü§ñ Chat with Bandi</h2>
                    
                    <div class="chat-container">
                        <div class="chat-messages" id="chatMessages">
                            <div class="message bot-message">
                                <div class="bot-name">Bandi</div>
                                Hello! I'm Bandi, your advanced AI safety companion. I'm equipped with cutting-edge accident detection technology and I'm here to protect you 24/7. All systems are online and monitoring your safety. How can I assist you today?
                            </div>
                        </div>
                        
                        <div class="chat-input-container">
                            <input type="text" class="chat-input" id="chatInput" placeholder="Ask Bandi anything about safety, emergencies, or system status...">
                            <button class="send-btn" onclick="sendMessage()">Send</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Maps/Location Page -->
        <div id="maps" class="page">
            <div class="header">
                <h1>üìç Location & Tracking</h1>
                <p>Real-time location monitoring and emergency response coordination</p>
            </div>
            <div class="map-container">
                <div class="map-placeholder">
                    üó∫Ô∏è Interactive GPS Map<br>
                    <small>Real-time location tracking with emergency zones</small>
                </div>
                <div class="location-info">
                    <div class="location-card">
                        <h3>üìç Current Location</h3>
                        <p><strong>Address:</strong> <span id="current-address">Loading...</span></p>
                        <p><strong>Coordinates:</strong> <span id="current-coords">Getting location...</span></p>
                        <p><strong>Accuracy:</strong> <span id="location-accuracy">¬±0m</span></p>
                        <p><strong>Last Updated:</strong> <span id="location-updated">Just now</span></p>
                    </div>
                    <div class="location-card">
                        <h3>üöë Nearest Emergency Services</h3>
                        <p><strong>Hospital:</strong> City General Hospital (2.3 km)</p>
                        <p><strong>Police:</strong> Central Police Station (1.8 km)</p>
                        <p><strong>Fire Dept:</strong> Station 5 (3.1 km)</p>
                        <p><strong>Response Time:</strong> 6-8 minutes</p>
                    </div>
                    <div class="location-card">
                        <h3>‚ö†Ô∏è Risk Assessment</h3>
                        <p><strong>Traffic Density:</strong> <span style="color: #f39c12;">Moderate</span></p>
                        <p><strong>Weather Conditions:</strong> <span style="color: #2ecc71;">Good</span></p>
                        <p><strong>Road Safety Score:</strong> <span style="color: #2ecc71;">8.5/10</span></p>
                        <p><strong>Accident History:</strong> 2 incidents this month</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Analytics Page -->
        <div id="analytics" class="page">
            <div class="header">
                <h1>üìä Safety Analytics</h1>
                <p>Comprehensive safety metrics and predictive analysis</p>
            </div>
            <div class="analytics-grid">
                <div class="analytics-card">
                    <h3>üìà Detection Performance</h3>
                    <p><strong>Accuracy Rate:</strong> 98.7%</p>
                    <p><strong>False Positives:</strong> 0.3%</p>
                    <p><strong>Response Time:</strong> 2.1s avg</p>
                    <div class="chart-placeholder">Performance Chart</div>
                </div>
                <div class="analytics-card">
                    <h3>üöó Trip Statistics</h3>
                    <p><strong>Total Distance:</strong> 1,247 km</p>
                    <p><strong>Safe Trips:</strong> 156/156</p>
                    <p><strong>Risk Score:</strong> Low</p>
                    <div class="chart-placeholder">Trip History Chart</div>
                </div>
                <div class="analytics-card">
                    <h3>‚ù§Ô∏è Health Monitoring</h3>
                    <p><strong>Avg Heart Rate:</strong> 74 BPM</p>
                    <p><strong>Stress Level:</strong> Low</p>
                    <p><strong>Sleep Quality:</strong> Good</p>
                    <div class="chart-placeholder">Health Trends Chart</div>
                </div>
                <div class="analytics-card">
                    <h3>‚ö†Ô∏è Risk Analysis</h3>
                    <p><strong>High-Risk Areas:</strong> 3 identified</p>
                    <p><strong>Time-based Risks:</strong> 8-9 PM</p>
                    <p><strong>Weather Impact:</strong> 15% increase in rain</p>
                    <div class="chart-placeholder">Risk Assessment Chart</div>
                </div>
            </div>
        </div>

        <!-- Settings Page -->
        <div id="settings" class="page">
            <div class="header">
                <h1>‚öôÔ∏è System Settings</h1>
                <p>Configure Bandi's detection parameters and emergency protocols</p>
            </div>
            <div class="settings-grid">
                <div class="settings-card">
                    <h3>üîß Detection Settings</h3>
                    <div class="form-group">
                        <label>Sensitivity Level</label>
                        <select id="sensitivity">
                            <option value="low">Low - Fewer false alarms</option>
                            <option value="medium" selected>Medium - Balanced</option>
                            <option value="high">High - Maximum detection</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Impact Threshold (G-force)</label>
                        <input type="range" min="2" max="20" value="8" id="impactThreshold">
                        <span id="thresholdValue">8G</span>
                    </div>
                    <div class="form-group">
                        <label>Auto-Alert Delay (seconds)</label>
                        <input type="number" min="10" max="120" value="30" id="alertDelay">
                    </div>
                    <button class="btn" onclick="saveDetectionSettings()">Save Detection Settings</button>
                </div>

                <div class="settings-card">
                    <h3>üìû Emergency Contacts</h3>
                    <div class="form-group">
                        <label>Primary Contact</label>
                        <input type="tel" placeholder="+1 (555) 123-4567" id="primaryContact">
                    </div>
                    <div class="form-group">
                        <label>Secondary Contact</label>
                        <input type="tel" placeholder="+1 (555) 987-6543" id="secondaryContact">
                    </div>
                    <div class="form-group">
                        <label>Medical Contact</label>
                        <input type="tel" placeholder="Doctor/Hospital" id="medicalContact">
                    </div>
                    <div class="form-group">
                        <label>Emergency Message Template</label>
                        <textarea rows="4" placeholder="Emergency! I need help. My location is..." id="emergencyMessage"></textarea>
                    </div>
                    <button class="btn" onclick="saveEmergencyContacts()">Save Contacts</button>
                </div>

                <div class="settings-card">
                    <h3>üîî Notification Settings</h3>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="soundAlerts" checked> Sound Alerts
                        </label>
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="vibrationAlerts" checked> Vibration Alerts
                        </label>
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="smsAlerts" checked> SMS Notifications
                        </label>
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="emailAlerts"> Email Notifications
                        </label>
                    </div>
                    <button class="btn" onclick="saveNotificationSettings()">Save Notification Settings</button>
                </div>

                <div class="settings-card">
                    <h3>ü©∫ Health Monitoring</h3>
                    <div class="form-group">
                        <label>Enable Health Monitoring</label>
                        <select id="healthMonitoring">
                            <option value="enabled" selected>Enabled</option>
                            <option value="disabled">Disabled</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Heart Rate Alert Threshold</label>
                        <input type="number" min="80" max="200" value="120" id="heartRateThreshold">
                    </div>
                    <div class="form-group">
                        <label>Medical Conditions</label>
                        <textarea rows="3" placeholder="List any medical conditions..." id="medicalConditions"></textarea>
                    </div>
                    <button class="btn" onclick="saveHealthSettings()">Save Health Settings</button>
                </div>
            </div>
        </div>

        <!-- Contacts Page -->
        <div id="contacts" class="page">
            <div class="header">
                <h1>üìû Emergency Contacts</h1>
                <p>Manage your emergency contact list and response protocols</p>
            </div>
            <div class="settings-grid">
                <div class="settings-card">
                    <h3>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Family Contacts</h3>
                    <div id="familyContacts">
                        <div class="contact-item">
                            <strong>John Doe (Spouse)</strong><br>
                            üì± +1 (555) 123-4567<br>
                            üìß john.doe@email.com
                        </div>
                    </div>
                    <button class="btn" onclick="addFamilyContact()">Add Family Contact</button>
                </div>
                
                <div class="settings-card">
                    <h3>üè• Medical Contacts</h3>
                    <div id="medicalContacts">
                        <div class="contact-item">
                            <strong>Dr. Smith (Primary Care)</strong><br>
                            üì± +1 (555) 987-6543<br>
                            üè• City Medical Center
                        </div>
                    </div>
                    <button class="btn" onclick="addMedicalContact()">Add Medical Contact</button>
                </div>
                
                <div class="settings-card">
                    <h3>üöì Emergency Services</h3>
                    <div class="contact-item">
                        <strong>Police:</strong> 911<br>
                        <strong>Fire Department:</strong> 911<br>
                        <strong>Ambulance:</strong> 911<br>
                        <strong>Poison Control:</strong> 1-800-222-1222
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // System state
        let systemState = {
            isMonitoring: true,
            detectionMethods: {
                accelerometer: true,
                gps: true,
                audio: false,
                camera: false,
                biometric: true,
                manual: true
            },
            alertLevel: 'safe',
            emergencyContacts: ['911', '+1234567890'],
            userLocation: { lat: 40.7128, lng: -74.0060, address: 'New York, NY' },
            settings: {
                sensitivity: 'medium',
                impactThreshold: 8,
                alertDelay: 30,
                soundAlerts: true,
                vibrationAlerts: true,
                smsAlerts: true,
                emailAlerts: false,
                healthMonitoring: 'enabled',
                heartRateThreshold: 120
            }
        };

        // Sensor simulation
        let sensorData = {
            accelerometer: { x: 0, y: 0, z: 9.8 },
            speed: 0,
            audioLevel: 45,
            heartRate: 72,
            temperature: 36.5,
            lastUpdate: Date.now()
        };

        // Bandi's enhanced knowledge base and responses
        const bandiResponses = {
            greeting: [
                "Hello! I'm Bandi, your advanced AI safety companion. I'm equipped with cutting-edge accident detection technology. How can I protect you today?",
                "Hi there! I'm Bandi, monitoring your safety 24/7 with advanced sensors and AI. Is everything okay?",
                "Greetings! I'm Bandi, your intelligent safety guardian. All systems are online and I'm ready to assist you."
            ],
            safety: [
                "Your safety is my primary mission. I'm continuously monitoring accelerometer data, GPS location, audio patterns, and biometric signals.",
                "All safety systems are operational. I'm tracking your vital signs, location, and environmental factors in real-time.",
                "Safety status: GREEN. All detection methods are active and I'm ready to respond to any emergency situation."
            ],
            emergency: [
                "üö® EMERGENCY PROTOCOL ACTIVATED! I'm immediately contacting emergency services, your emergency contacts, and coordinating rescue efforts.",
                "Emergency detected! I've alerted 911, shared your precise location, and notified your emergency contacts. Help is on the way!",
                "üÜò CRITICAL ALERT: Emergency services have been contacted. I'm monitoring your vital signs and coordinating rescue operations."
            ],
            help: [
                "I can help you with: üîπ Real-time accident detection üîπ Health monitoring üîπ GPS tracking üîπ Emergency response üîπ Biometric analysis üîπ Risk assessment üîπ Safety analytics",
                "My advanced capabilities include: AI-powered accident detection, computer vision analysis, biometric monitoring, predictive safety analytics, and instant emergency response.",
                "I'm equipped with multiple detection systems: accelerometer sensors, GPS tracking, audio analysis, computer vision, heart rate monitoring, and manual emergency alerts."
            ],
            unknown: [
                "I'm not quite sure what you mean. Could you clarify? I specialize in safety monitoring, accident detection, and emergency response.",
                "I didn't understand that request. I'm designed to help with safety-related queries and emergency situations. How can I assist you?",
                "Could you rephrase that? I'm your AI safety companion focused on accident detection and emergency response."
            ],
            accident_tips: [
                "üöó Advanced Safety Tips: Always wear seatbelts, maintain 3-second following distance, avoid phone use while driving, keep emergency kit in vehicle, and ensure Bandi is always active.",
                "üõ°Ô∏è Prevention Strategies: Regular vehicle maintenance, defensive driving techniques, avoiding driving when tired, weather awareness, and keeping emergency contacts updated.",
                "üì± Emergency Preparedness: Keep phone charged, share location with trusted contacts, learn basic first aid, know your medical information, and trust Bandi's detection systems."
            ],
            health: [
                "I'm monitoring your heart rate, body temperature, and stress indicators. Your current health metrics are within normal ranges.",
                "Health status: GOOD. Heart rate: 72 BPM, Temperature: 36.5¬∞C. I'll alert you if any concerning changes are detected.",
                "Biometric monitoring is active. I'm tracking your vital signs and will immediately alert if any health emergencies are detected."
            ],
            location: [
                "I'm tracking your location in real-time. You're currently in a moderate-risk area with good emergency service coverage.",
                "GPS monitoring active. Your location is being continuously tracked for emergency response coordination.",
                "Location services are optimal. I have your precise coordinates and nearest emergency services mapped."
            ],
            technology: [
                "I use advanced AI algorithms, machine learning models, and multiple sensor fusion for highly accurate accident detection.",
                "My technology includes: computer vision, natural language processing, predictive analytics, and real-time sensor data processing.",
                "I'm powered by cutting-edge AI technology with 98.7% accuracy in accident detection and sub-2-second response times."
            ]
        };

        // Initialize the system
        function initializeSystem() {
            startSensorSimulation();
            initializeDetectionMethods();
            getUserLocation();
            
            // Add event listeners
            const chatInput = document.getElementById('chatInput');
            if (chatInput) {
                chatInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        sendMessage();
                    }
                });
            }
            
            console.log('Bandi Accident Detection System initialized');
            
            // Initial system message
            setTimeout(() => {
                addChatMessage("ü§ñ All systems initialized! I'm now actively monitoring your safety using advanced AI technology. Feel free to ask me anything about safety, emergencies, or system status.", 'bot');
            }, 1000);
        }

        // Navigation functions
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show selected page
            document.getElementById(pageId).classList.add('active');
            
            // Update navigation
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        // Simulate sensor data with realistic variations
        function startSensorSimulation() {
            setInterval(() => {
                // Simulate normal variations in sensor data
                sensorData.accelerometer.x = (Math.random() - 0.5) * 2;
                sensorData.accelerometer.y = (Math.random() - 0.5) * 2;
                sensorData.accelerometer.z = 9.8 + (Math.random() - 0.5) * 0.5;
                sensorData.speed = Math.max(0, sensorData.speed + (Math.random() - 0.5) * 15);
                sensorData.audioLevel = 35 + Math.random() * 35;
                sensorData.heartRate = 65 + Math.random() * 20;
                sensorData.temperature = 36.0 + Math.random() * 1.5;
                
                updateSensorDisplay();
                checkForAccident();
            }, 1000);
        }

        // Update sensor display
        function updateSensorDisplay() {
            const elements = {
                'accelerometer-x': sensorData.accelerometer.x.toFixed(1),
                'accelerometer-y': sensorData.accelerometer.y.toFixed(1),
                'accelerometer-z': sensorData.accelerometer.z.toFixed(1),
                'speed': Math.round(sensorData.speed),
                'audio-level': Math.round(sensorData.audioLevel),
                'heart-rate': Math.round(sensorData.heartRate),
                'temperature': sensorData.temperature.toFixed(1)
            };
            
            Object.entries(elements).forEach(([id, value]) => {
                const element = document.getElementById(id);
                if (element) element.textContent = value;
            });
        }

        // Enhanced accident detection with multiple factors
        function checkForAccident() {
            const accelMagnitude = Math.sqrt(
                Math.pow(sensorData.accelerometer.x, 2) +
                Math.pow(sensorData.accelerometer.y, 2) +
                Math.pow(sensorData.accelerometer.z - 9.8, 2)
            );
            
            let alertLevel = 'safe';
            let statusText = 'SAFE';
            let statusClass = 'status-safe';
            
            // Multi-factor risk assessment
            const riskFactors = {
                highImpact: accelMagnitude > 15,
                moderateImpact: accelMagnitude > 8,
                highSpeed: sensorData.speed > 120,
                loudNoise: sensorData.audioLevel > 80,
                moderateNoise: sensorData.audioLevel > 65,
                highHeartRate: sensorData.heartRate > systemState.settings.heartRateThreshold,
                abnormalTemp: sensorData.temperature > 38.5 || sensorData.temperature < 35.0
            };
            
            if (riskFactors.highImpact || (riskFactors.moderateImpact && riskFactors.loudNoise) || riskFactors.abnormalTemp) {
                alertLevel = 'danger';
                statusText = 'EMERGENCY DETECTED';
                statusClass = 'status-danger';
                triggerEmergencyAlert();
            } else if (riskFactors.moderateImpact || riskFactors.highSpeed || riskFactors.moderateNoise || riskFactors.highHeartRate) {
                alertLevel = 'warning';
                statusText = 'WARNING';
                statusClass = 'status-warning';
            }
            
            systemState.alertLevel = alertLevel;
            
            const statusElement = document.getElementById('system-status');
            if (statusElement) {
                const statusIndicator = statusElement.previousElementSibling;
                statusElement.textContent = statusText;
                if (statusIndicator) {
                    statusIndicator.className = `status-indicator ${statusClass}`;
                }
            }
        }

        // Initialize detection methods
        function initializeDetectionMethods() {
            const methodCards = document.querySelectorAll('.method-card');
            methodCards.forEach(card => {
                const method = card.dataset.method;
                if (systemState.detectionMethods[method]) {
                    card.classList.add('active');
                }
                
                card.addEventListener('click', () => {
                    toggleDetectionMethod(method, card);
                });
            });
        }

        // Toggle detection method
        function toggleDetectionMethod(method, cardElement) {
            systemState.detectionMethods[method] = !systemState.detectionMethods[method];
            
            if (systemState.detectionMethods[method]) {
                cardElement.classList.add('active');
                addChatMessage(`‚úÖ ${method.charAt(0).toUpperCase() + method.slice(1)} detection activated! I'm now monitoring this safety parameter.`, 'bot');
            } else {
                cardElement.classList.remove('active');
                addChatMessage(`‚ùå ${method.charAt(0).toUpperCase() + method.slice(1)} detection deactivated. Consider keeping all safety systems active for maximum protection.`, 'bot');
            }
        }

        // Enhanced emergency alert system
        function triggerEmergencyAlert() {
            if (systemState.alertLevel !== 'danger') return;
            
            showAlert('üö® EMERGENCY DETECTED! Contacting emergency services and your emergency contacts immediately!', 'danger');
            addChatMessage(getRandomResponse('emergency'), 'bot');
            
            // Simulate emergency response sequence
            setTimeout(() => {
                addChatMessage("üìû Emergency services contacted: 911 dispatch notified with your exact location and situation details.", 'bot');
            }, 2000);
            
            setTimeout(() => {
                addChatMessage("üì± Emergency contacts alerted: Your primary contacts have been notified via SMS and phone call.", 'bot');
            }, 4000);
            
            setTimeout(() => {
                addChatMessage("üöë Emergency services ETA: 6-8 minutes. I'm monitoring your vital signs and will provide updates.", 'bot');
            }, 6000);
            
            setTimeout(() => {
                addChatMessage("üí¨ Stay calm and follow my instructions. Help is on the way. Can you respond to confirm your status?", 'bot');
            }, 8000);
        }

        // Manual emergency trigger
        function triggerManualEmergency() {
            if (confirm('üö® EMERGENCY ALERT\n\nAre you sure you want to trigger an emergency alert? This will contact emergency services immediately.')) {
                systemState.alertLevel = 'danger';
                showAlert('üö® MANUAL EMERGENCY ALERT ACTIVATED!', 'danger');
                addChatMessage("üÜò Manual emergency alert activated! I'm immediately contacting emergency services and your emergency contacts.", 'bot');
                triggerEmergencyAlert();
            }
        }

        // Get user location
        function getUserLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        systemState.userLocation = {
                            lat: position.coords.latitude,
                            lng: position.coords.longitude,
                            accuracy: position.coords.accuracy
                        };
                        updateLocationDisplay();
                    },
                    (error) => {
                        console.log('Location access denied:', error);
                        updateLocationDisplay();
                    }
                );
            }
        }

        // Update location display
        function updateLocationDisplay() {
            const coords = document.getElementById('current-coords');
            const accuracy = document.getElementById('location-accuracy');
            const updated = document.getElementById('location-updated');
            
            if (coords) coords.textContent = `${systemState.userLocation.lat.toFixed(6)}, ${systemState.userLocation.lng.toFixed(6)}`;
            if (accuracy) accuracy.textContent = `¬±${systemState.userLocation.accuracy || 0}m`;
            if (updated) updated.textContent = new Date().toLocaleTimeString();
        }

        // Enhanced chat functionality
        function sendMessage() {
            const input = document.getElementById('chatInput');
            if (!input) return;
            
            const message = input.value.trim();
            if (message === '') return;
            
            addChatMessage(message, 'user');
            input.value = '';
            
            // Process message and respond
            setTimeout(() => {
                const response = processBandiResponse(message);
                addChatMessage(response, 'bot');
            }, 500);
        }

        // Add message to chat
        function addChatMessage(message, sender) {
            const chatMessages = document.getElementById('chatMessages');
            if (!chatMessages) return;
            
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}-message`;
            
            if (sender === 'bot') {
                messageDiv.innerHTML = `<div class="bot-name">Bandi</div>${message}`;
            } else {
                messageDiv.textContent = message;
            }
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Enhanced response processing
        function processBandiResponse(userMessage) {
            const message = userMessage.toLowerCase();
            
            if (message.includes('hello') || message.includes('hi') || message.includes('hey')) {
                return getRandomResponse('greeting');
            } else if (message.includes('emergency') || message.includes('help') || message.includes('accident')) {
                if (message.includes('detected') || message.includes('happened')) {
                    return getRandomResponse('emergency');
                } else {
                    return getRandomResponse('help');
                }
            } else if (message.includes('safe') || message.includes('status') || message.includes('monitoring')) {
                return getRandomResponse('safety');
            } else if (message.includes('health') || message.includes('heart') || message.includes('biometric')) {
                return getRandomResponse('health');
            } else if (message.includes('location') || message.includes('gps') || message.includes('where')) {
                return getRandomResponse('location');
            } else if (message.includes('technology') || message.includes('ai') || message.includes('how do you work')) {
                return getRandomResponse('technology');
            } else if (message.includes('tips') || message.includes('advice') || message.includes('prevent')) {
                return getRandomResponse('accident_tips');
            } else if (message.includes('what') && message.includes('do')) {
                return getRandomResponse('help');
            } else {
                return getRandomResponse('unknown');
            }
        }

        // Get random response from category
        function getRandomResponse(category) {
            const responses = bandiResponses[category] || bandiResponses.unknown;
            return responses[Math.floor(Math.random() * responses.length)];
        }

        // Settings functions
        function saveDetectionSettings() {
            const sensitivity = document.getElementById('sensitivity')?.value;
            const threshold = document.getElementById('impactThreshold')?.value;
            const delay = document.getElementById('alertDelay')?.value;
            
            if (sensitivity) systemState.settings.sensitivity = sensitivity;
            if (threshold) systemState.settings.impactThreshold = parseInt(threshold);
            if (delay) systemState.settings.alertDelay = parseInt(delay);
            
            showAlert('‚úÖ Detection settings saved successfully!', 'success');
            addChatMessage('Your detection settings have been updated. I\'ve adjusted my sensitivity and response parameters accordingly.', 'bot');
        }

        function saveEmergencyContacts() {
            showAlert('‚úÖ Emergency contacts saved successfully!', 'success');
            addChatMessage('Emergency contacts updated! I now have your latest contact information for emergency situations.', 'bot');
        }

        function saveNotificationSettings() {
            showAlert('‚úÖ Notification settings saved successfully!', 'success');
            addChatMessage('Notification preferences updated! I\'ll use your preferred alert methods during emergencies.', 'bot');
        }

        function saveHealthSettings() {
            const threshold = document.getElementById('heartRateThreshold')?.value;
            if (threshold) systemState.settings.heartRateThreshold = parseInt(threshold);
            
            showAlert('‚úÖ Health monitoring settings saved successfully!', 'success');
            addChatMessage('Health monitoring settings updated! I\'ll track your vital signs according to your preferences.', 'bot');
        }

        function addFamilyContact() {
            showAlert('üìû Family contact form opened!', 'info');
        }

        function addMedicalContact() {
            showAlert('üè• Medical contact form opened!', 'info');
        }

        // Show alert notification
        function showAlert(message, type) {
            const alert = document.createElement('div');
            alert.className = `alert alert-${type}`;
            alert.textContent = message;
            document.body.appendChild(alert);
            
            setTimeout(() => {
                alert.remove();
            }, 5000);
        }

        // Update threshold display
        function updateThresholdDisplay() {
            const slider = document.getElementById('impactThreshold');
            const display = document.getElementById('thresholdValue');
            if (slider && display) {
                display.textContent = slider.value + 'G';
            }
        }

        // Initialize the system when page loads
        window.addEventListener('load', initializeSystem);

        // Add slider event listener
        document.addEventListener('DOMContentLoaded', function() {
            const slider = document.getElementById('impactThreshold');
            if (slider) {
                slider.addEventListener('input', updateThresholdDisplay);
            }
        });

        // Simulate some realistic interactions
        setTimeout(() => {
            addChatMessage("üü¢ All safety systems are now fully operational! I'm monitoring your environment and ready to respond to any emergency situation.", 'bot');
        }, 3000);

        // Simulate periodic safety checks
        setInterval(() => {
            if (Math.random() > 0.95) {
                const messages = [
                    "üîç Periodic safety check complete. All systems nominal.",
                    "üìä System health check: All detection mechanisms functioning perfectly.",
                    "üõ°Ô∏è Safety status update: Environment secure, no threats detected."
                ];
                addChatMessage(messages[Math.floor(Math.random() * messages.length)], 'bot');
            }
        }, 60000); // Every minute

        // Add some demo interactions for high activity periods
        setTimeout(() => {
            if (Math.random() > 0.8) {
                sensorData.accelerometer.x = 6;
                sensorData.audioLevel = 70;
                setTimeout(() => {
                    addChatMessage("‚ö†Ô∏è I detected some unusual sensor readings. Everything appears to be fine now, but I'm keeping a close watch on your safety metrics.", 'bot');
                }, 1000);
            }
        }, 15000);
    </script>
</body>
</html>